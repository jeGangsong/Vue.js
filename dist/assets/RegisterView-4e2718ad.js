import{_ as V,h as S,e as B,f as o,u as I,o as i,c as r,a,i as w,v as M,F as y,g as T,t as h,j,k as q,l as D,p as F,d as N}from"./index-9fe198f4.js";import{a as v}from"./axios-11e9606c.js";const k=c=>(F("data-v-551fca31"),c=c(),N(),c),O={class:"form-wrapper"},$=k(()=>a("span",null,"메뉴 선택: ",-1)),A=["value"],E={class:"count-Box"},z=k(()=>a("span",null,"요청 사항: ",-1)),G={key:0},H={key:1},J={key:0,class:"image-wrapper"},K=["src"],P={__name:"RegisterView",setup(c){const d=S(),_=B(),n=o(0),p=o("");o("");const f=o(null),g=I(),l=o(),m=o([]),u=o("");async function R(){(!l.value||!n.value||!u.value)&&alert("빈 값이 있습니다. 내용을 전부 작성해주세요.");const e=await v.orders.create(l.value,n.value,u.value);e.data.success&&(alert(e.data.message),_.push({name:"orders"})),e.data.success||alert(e.data.message)}async function b(){const e=await v.orders.update(d.params.id,l.value,n.value,u.value);console.log(e),alert(e.data.message),_.push({name:"order-detail",params:{id:e.id}})}function U(e){return URL.createObjectURL(e)}async function x(){const e=await v.menus.findAll();m.value=e.data}async function C(){const e=await v.orders.findOne(d.params.id);p.value=e.data.name,u.value=e.data.request_detail,console.log(p.value)}L();async function L(){if(await x(),d.params.id){await C(),g.changeTitle("주문 수정하기");const e=m.value.find(t=>t.name==p.value);console.log(e),l.value=e.id}else g.changeTitle("주문하기")}return(e,t)=>(i(),r(y,null,[a("div",O,[a("div",null,[$,w(a("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),name:"menu.id"},[(i(!0),r(y,null,T(m.value,s=>(i(),r("option",{value:s.id},h(s.name),9,A))),256))],512),[[M,l.value]]),a("span",E,h(n.value)+" 개 ",1),a("button",{class:"count-btn",onClick:t[1]||(t[1]=s=>n.value++)},"+"),a("button",{class:"count-btn",onClick:t[2]||(t[2]=s=>n.value--)},"-")]),a("div",null,[z,w(a("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s)},null,512),[[j,u.value]])]),q(d).params.id?(i(),r("div",G,[a("button",{onClick:b},"주문 수정하기")])):(i(),r("div",H,[a("button",{onClick:R},"주문 하기")]))]),f.value?(i(),r("div",J,[a("img",{class:"selected-image",src:U(f.value)},null,8,K)])):D("",!0)],64))}},X=V(P,[["__scopeId","data-v-551fca31"]]);export{X as default};
